# Distributed Counter

ì´ ì˜ˆì œì—ì„œëŠ” ê¸°ë³¸ì ì¸ ë¶„ì‚° ì¹´ìš´í„° ì•±ì„ ë§Œë“œëŠ” ê³¼ì •ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. Sui Move ëª¨ë“ˆì„ ì‘ì„±í•˜ê³  ì´ë¥¼ React ê¸°ë°˜ Sui dAppê³¼ ì—°ê²°í•˜ëŠ” ëê¹Œì§€ì˜ ì „ì²´ íë¦„ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì´ ì•±ì€ ì‚¬ìš©ìê°€ ëˆ„êµ¬ë‚˜ ì¦ê°€ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì¹´ìš´í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ë‹¨ ì¹´ìš´í„°ë¥¼ ë¦¬ì…‹í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì€ ì†Œìœ ìì—ê²Œë§Œ ë¶€ì—¬ë©ë‹ˆë‹¤.

**ê°€ì´ë“œëŠ” ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.**

> 1.  ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸: ì¹´ìš´í„° êµ¬ì¡°ì²´ì™€ ë¡œì§ì„ ì„¤ì •í•˜ëŠ” Move ì½”ë“œ
> 2.  í”„ë¡ íŠ¸ì—”ë“œ: ì‚¬ìš©ìê°€ ì¹´ìš´í„° ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì¦ê°€ì‹œí‚¤ë©°, ë¦¬ì…‹í•  ìˆ˜ ìˆëŠ” UI

<br>
ì´ë²ˆ ê°€ì´ë“œëŠ” Shared Objectsì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤. SuiëŠ” Object ì¤‘ì‹¬ì˜ Move ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ë©°, ê°ì²´(Object)ëŠ” í¬ê²Œ Shared Objectsì™€ Owned Objectsë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

> Shared ObjectsëŠ” ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©°, ì „ì—­ì ìœ¼ë¡œ ê³µìœ  ê°€ëŠ¥í•œ ê°ì²´ì…ë‹ˆë‹¤.
>
> Owned ObjectsëŠ” íŠ¹ì • ê³„ì •ì´ ì†Œìœ í•˜ë©°, ì†Œìœ ìë§Œì´ ì§ì ‘ ì ‘ê·¼í•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ í¬ì»¤ ê²Œì„ì„ ìƒê°í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> Shared Objects: í…Œì´ë¸” ìœ„ì˜ í¬ì»¤ ë±ì²˜ëŸ¼, ëª¨ë“  í”Œë ˆì´ì–´ê°€ ì ‘ê·¼í•˜ê³  ì¹´ë“œë¥¼ ë½‘ì„ ìˆ˜ ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤.
>
> Owned Objects: ê° í”Œë ˆì´ì–´ê°€ ë“¤ê³  ìˆëŠ” ì†íŒ¨ì²˜ëŸ¼, ì˜¤ì§ í•´ë‹¹ í”Œë ˆì´ì–´ë§Œ ì ‘ê·¼í•˜ê³  ë³¼ ìˆ˜ ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤.

ì´ë²ˆ Distributed Counterì—ì„œëŠ” Shared Objectsë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì¹´ìš´í„° ê°ì²´(Counter objects)ë¥¼ ìƒì„±í•˜ê³ , ëˆ„êµ¬ë‚˜ ì¦ê°€ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.

## 1ë‹¨ê³„: í”„ë¡œì íŠ¸ í´ë” ìƒì„±

ì‹œìŠ¤í…œì—ì„œ ìƒˆë¡œìš´ í´ë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
mkdir distributed-counter
```

ì´ í´ë”ëŠ” í”„ë¡œì íŠ¸ì˜ ëª¨ë“  íŒŒì¼ì„ ë‹´ëŠ” ìµœìƒìœ„ í´ë”ì…ë‹ˆë‹¤.
ì›í•˜ëŠ” ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ë°”ê¿”ë„ ë˜ì§€ë§Œ, ì´í›„ ê°€ì´ë“œì—ì„œëŠ” ì´ êµ¬ì¡°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.

## 2ë‹¨ê³„: Move ë””ë ‰í† ë¦¬ ìƒì„±

```bash
mkdir ./move/counter/sources
```

`sources` í´ë”ì— move ì½”ë“œê°€ ì‘ì„±ë  ê²ƒì…ë‹ˆë‹¤.

## 3ë‹¨ê³„: Smart Contracts ì‘ì„±

### 3-1: toml íŒŒì¼ ì‘ì„±

ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‘ì„±í•˜ê¸° ì‹œì‘í•˜ë ¤ë©´, distributed-counter/move/counter ì•ˆì— `Move.toml` íŒŒì¼ì„ ìƒì„±í•˜ê³ , ë‹¤ìŒ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤.

```bash
[package]
name = "counter"
version = "0.0.1"
edition = "2024.beta"

[dependencies]
Sui = { git = "https://github.com/MystenLabs/sui.git", subdir = "crates/sui-framework/packages/sui-framework", rev = "framework/testnet" }

[addresses]
counter = "0x0"
```

`Move.toml`ì€ Move íŒ¨í‚¤ì§€ì˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ë¡œ, Move ëª¨ë“ˆì„ êµ¬ì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

### 1. [package]

íŒ¨í‚¤ì§€ ìì²´ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì •ì˜í•˜ëŠ” í•„ë“œì…ë‹ˆë‹¤.

| í•„ë“œ      | ì„¤ëª…                         | ì˜ˆì‹œ ê°’       |
| --------- | ---------------------------- | ------------- |
| `name`    | íŒ¨í‚¤ì§€ ì´ë¦„                  | `"counter"`   |
| `version` | íŒ¨í‚¤ì§€ ë²„ì „                  | `"0.0.1"`     |
| `edition` | Move ì–¸ì–´ ë²„ì „/íŒ¨í‚¤ì§€ ì—ë””ì…˜ | `"2024.beta"` |

> ğŸ’¡ **ê°„ë‹¨ ì„¤ëª…**: ì´ íŒ¨í‚¤ì§€ê°€ ì–´ë–¤ ì´ë¦„ê³¼ ë²„ì „ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ”ì§€, ì–´ë–¤ Move ì—ë””ì…˜ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ì„¤ì •ì…ë‹ˆë‹¤.

### 2. [dependencies]

íŒ¨í‚¤ì§€ê°€ ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ Move íŒ¨í‚¤ì§€ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ ì–¸í•˜ëŠ” í•„ë“œì…ë‹ˆë‹¤. ì˜ˆì œì—ì„œëŠ” Sui íŒ¨í‚¤ì§€ë¥¼ Git ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

| í•„ë“œ     | ì„¤ëª…                             | ì˜ˆì‹œ ê°’                                         |
| -------- | -------------------------------- | ----------------------------------------------- |
| `git`    | íŒ¨í‚¤ì§€ Git URL                   | `"https://github.com/MystenLabs/sui.git"`       |
| `subdir` | í•´ë‹¹ ë¦¬í¬ì§€í† ë¦¬ ë‚´ì˜ íŒ¨í‚¤ì§€ ê²½ë¡œ | `"crates/sui-framework/packages/sui-framework"` |
| `rev`    | ì‚¬ìš©í•  ë¸Œëœì¹˜ë‚˜ ì»¤ë°‹             | `"framework/testnet"`                           |

> ğŸ’¡ **ê°„ë‹¨ ì„¤ëª…**: ë‚´ íŒ¨í‚¤ì§€ê°€ ë‹¤ë¥¸ íŒ¨í‚¤ì§€(Sui í”„ë ˆì„ì›Œí¬)ë¥¼ í•„ìš”ë¡œ í•œë‹¤ê³  ì•Œë ¤ì£¼ëŠ” ì„¤ì •ì…ë‹ˆë‹¤. `Distributed Counter`ì—ì„œëŠ” `transfer::share_object`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Sui í”„ë ˆì„ì›Œí¬ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

### 3. [addresses]

Move íŒ¨í‚¤ì§€ì—ì„œ ì‚¬ìš©í•  ì „ì—­ ì£¼ì†Œ(Address) ë§¤í•‘ì„ ì •ì˜í•˜ëŠ” í•„ë“œì…ë‹ˆë‹¤.

| ì„¤ì •              | ì„¤ëª…                              |
| ----------------- | --------------------------------- |
| `counter = "0x0"` | counter ëª¨ë“ˆì´ ë°°í¬ë  ì£¼ì†Œë¥¼ ì§€ì • |

> âš ï¸ **ì°¸ê³ **: ì´í›„ ë°°í¬ ì‹œ ì‹¤ì œ ê³„ì • ì£¼ì†Œë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ’¡ **ê°„ë‹¨ ì„¤ëª…**: Move ëª¨ë“ˆì´ ë¸”ë¡ì²´ì¸ ìƒ ì–´ë””ì— ìœ„ì¹˜í• ì§€ ì§€ì •í•˜ëŠ” ì„¤ì •ì…ë‹ˆë‹¤.

### 3-2 `counter.move` íŒŒì¼ ìƒì„± ë° `counter` struct ìƒì„±

distributed-counter/move/counter/sources ì•ˆì— `counter.move` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
íŒŒì¼ ì•ˆì— ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```rust
module counter::counter;
```

`counter::counterëŠ”` íŒ¨í‚¤ì§€ ì´ë¦„(counter)ê³¼ ëª¨ë“ˆ ì´ë¦„(counter)ì„ `::`ë¡œ êµ¬ë¶„í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì…ë‹ˆë‹¤.

- ì²« ë²ˆì§¸ counter: íŒ¨í‚¤ì§€ ì´ë¦„ (Move.tomlì˜ `[package] name = "counter"`)

- ë‘ ë²ˆì§¸ counter: ëª¨ë“ˆ ì´ë¦„, ì´ ì•ˆì— ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë¡œì§ì„ ì‘ì„±

ì¦‰, â€œì´ íŒ¨í‚¤ì§€ ì•ˆì— counterë¼ëŠ” ëª¨ë“ˆì„ ë§Œë“¤ê² ë‹¤â€ë¼ëŠ” ì„ ì–¸ì…ë‹ˆë‹¤.

> íŒ¨í‚¤ì§€(Package) <br>
> íŒ¨í‚¤ì§€ = Move ëª¨ë“ˆë“¤ì˜ ë¬¶ìŒ + ë©”íƒ€ë°ì´í„°
>
> Move.toml íŒŒì¼ë¡œ ì •ì˜í•˜ë©°, í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ ì•ˆì—ëŠ” ì—¬ëŸ¬ ëª¨ë“ˆì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> íŒ¨í‚¤ì§€ëŠ” ë°°í¬ ë‹¨ìœ„ì…ë‹ˆë‹¤. ë¸”ë¡ì²´ì¸ì— ë°°í¬í•  ë•Œ íŒ¨í‚¤ì§€ ë‹¨ìœ„ë¡œ ë¹Œë“œ ë° ë°°í¬í•©ë‹ˆë‹¤.
>
> ì˜ˆì‹œ: counter íŒ¨í‚¤ì§€ â†’ Counter ëª¨ë“ˆì´ ë“¤ì–´ ìˆëŠ” íŒ¨í‚¤ì§€

> ëª¨ë“ˆ(Module) <br>
> ëª¨ë“ˆ = ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë˜ëŠ” ê¸°ëŠ¥ ë‹¨ìœ„ ì½”ë“œ
>
> íŒ¨í‚¤ì§€ ì•ˆì—ì„œ ì •ì˜í•˜ë©°, structì™€ í•¨ìˆ˜ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.
>
> ëª¨ë“ˆ ì•ˆì—ì„œ ì •ì˜í•œ í•¨ìˆ˜ì™€ êµ¬ì¡°ì²´ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì´ë‚˜ ì™¸ë¶€ì—ì„œ ë¶ˆëŸ¬ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> ì˜ˆì‹œ: counter::counter ëª¨ë“ˆ â†’ Counter struct, increment(), reset() í•¨ìˆ˜ í¬í•¨
